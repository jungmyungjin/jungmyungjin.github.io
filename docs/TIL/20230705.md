---
layout: default
title: 20230705
parent: Today I Learned

---

# Today list : backend 파일구조 잡기
``` js
const express = require("express");

// 모든 작업을 표시하는 메서드
function indexTask(req, res) {
	// 코드 내용
}

// 특정 작업을 표시하는 메서드
function showTask(req, res) {
	// 코드 내용
}

// 새로운 작업을 생성하는 메서드
function createTask(req, res) {
	// 코드 내용
}

// 기존 작업을 업데이트하는 메서드
function updateTask(req, res) {
	// 코드 내용
}

// 작업을 삭제하는 메서드
function deleteTask(req, res) {
	// 코드 내용
}

// 작업을 완료 상태로 업데이트하는 메서드
function markCompleteTask(req, res) {
	// 코드 내용
}
// 작업을 보류 상태로 업데이트하는 메서드
function markPendingTask(req, res) {
	// 코드 내용
}
```


### 🤔 controller, service 구조 를 함수형으로 할까 클래스형으로 할까?
**함수형 프로그래밍**
- 간결하고, 테스트하기 쉬우며, 이해하고 작성하기 쉽다.
- 사이드 이펙트를 최소화하므로 버그 발생 가능성이 줄어들고, 독립적인 함수로 코드를 구성하면 재사용성이 높앋진다.
- **컨트롤러**
	- 컨트롤러에서는 요청(request)과 응답(response)을 반환하는 함수를 정의하는 경우가 많다.
	- 이런 경우엔 함수형 프로그래밍이 효율적일 수 있다.
- **서비스**
	- 데이터베이스와의 상호작용 같은 비즈니스 로직을 처리하는 함수를 정의하는 경우가 많다.

**클래스형 프로그래밍**
- 데이터와 그 데이터를 다루는 메서드를 하나의 객체 내부에 묶을 수 있으므로, 상태 관리에 유리하다.
- 클래스는 생성자와 메서드를 통해 객체의 생성주기 동안 일관된 상태를 유지할 수 있게 해준다
	- <u>예를 들어,</u> 특정 서비스가 여러 메서드에서 같은 데이터를 다루어야 하는 경우 클래스를 사용하면 편리하다. 또한 클래스는 상속을 지원하므로 코드 재사용성이 좋아질 수 있다.

> Express.js에서 컨트롤러와 서비스에 대해 함수형 프로그래밍과 클래밍중 어떤 것을 사용할지는 상황에 따라 다르며, 두 가지 스타일을 적절하게 혼합하여 사용하는 것도 가능하다.



~~=> 사실 지금 프로젝트 단계에서는 두가지 방법을 사용하는것에 큰 차이는 없다. 하지만 method 가 클래스에 묶인(?) 클래스 형이 보기 편할 것 같아서 그걸로 사용해야겠다. 취소!~~ 

### 🤔 폴더 내부에 `index.js` 파일을 포함하는 경우와 그렇지 않은 경우는 어떻게 구분할까?
예제 상황
```
controllers
 ├── index.js
 └── taskController.js
routes
  ├── hello.js
  ├── index.js
  ├── task.js
  └── user.js
```

 **index.js 파일로 관리하는 경우**
- **장점**
	- **모듈화**
		- 각각 폴더에 index.js 파일을 두면, 각 폴더는 한 모듈처럼 동작하게 된다. 이는 코드의 모듈화를 도와주며, 그에 따라서 코드의 재 사용성과 가독성을 높이게 된다.
	- **응집도와 결합도**
		- 폴더 별로 적절하게, index.js 파일을 만들어 관리한다면, 각 기능들이 응집성을 가지게 되고, 결합도가 낮아진다. 이는 유지보수에 유리하며, 코드의 품질을 높인다.
	- **명확한 경로 관리**
		- index.js 파일을 이용하면 모듈을 require나 import 할 때, 상대 경로를 이용하는 대신에 모듈 이름만으로 쉽게 가져올 수 있다. 이는 경로 관리를 효율적이고 명확하게 만들어준다.
- **단점**
	- **복잡성**
		- 프로젝트 구조가 복잡해질 경우, 각 index.js를 만들고 관리하는 것이 부담스러울 수 있다. 잘못 관리되면 파일 구조가 복잡해지고 코드의 가독성을 해칠 수 있다.
	- **추적 어려움**
		- 각 폴더에 index.js 파일이 있을 경우, 특정 모듈이 어디에서 import되었는지 추적하기 어려울 수 있다. 이는 디버깅을 어렵게 만들 수 있다.
	- **명명규칙**
		- 모든 폴더에 같은 이름의 index.js파일이 있으면, 특정 파일을 찾기 어렵거나 혼동을 일으킬 수 있다.

프로젝트의 복잡도, 유지 보수 요구 사항, 개발팀의 스타일 가이드등을 고려해야한다.
프로젝트 규모가 작고, 각 폴더가 명확한 역할을 가지고 있을 경우, 이 방법은 매우 효과적일 수 있다. 하지만 프로젝트의 규모가 크거나, 폴더 구조가 복잡해지는 경우, 이런 방식은 관리하기 어려워질 수 있다.

<u>Express.js에서의 미들웨어나 라우터 같은 경우는 일반적으로 함수형 프로그래밍이 주로 사용한다</u>

### 🤔 Express.js 에선 왜 미들웨어나 라우터는 왜 주로 함수형 프로그래밍을 주로 사용할까?
- **단순성과 가독성**
	- <u>미들웨어 체인에는 함수형이 어울린다.</u>
	- Express.js는 미들웨어 체인의 개념을 사용하고 있다.
	- 이 체인에 들어가는 각 미들웨어는 다음 미들웨어를 호출하는 역할을 사용한다.
	- 이러한 패턴은 함수형 프로그래밍에 잘 어울리며, 각 미들웨어를 개별적인, 재사용 가능한 함수로 취급할 수 있어 단순하고 가독성이 높다.
- **상태 관리**
	- <u>미들웨어는 주로 요청과 응답을 처리하며 클래스의 이점인 상태관리가 필요없다</u>
	- Express.js의 미들웨어는 주로 요청과 응답을 처리하는데 사용되며, 상태 관리 보다는 데이터 변환, 인증 라우팅 등의 로직에 집중한다
	- 이러한 작업은 순수 함수로 처리하기 적합하며, 별도의 상태관리가 필요하지 않는다.
- **유연성**
	- <u>함수형 프로그래밍은 컴포지션을 쉽게 할 수 있다.</u>
	- 여러 미들웨어를 조합하여 새로운 기능을 만드는 것이 쉬워진다. 
	- 반면 클래스는 상속을 통한 확장이 주된 방법이지만, 이는 종종 복잡성을 증가시키고 유연성을 제한할 수 있다.
- **함수형으로 하면 미들웨어 함수는 독립적이며 테스트가 가능하다**
	-  <u>함수형으로 하면 미들웨어 함수는 독립적이며 테스트가 가능하다</u>
	- 함수는 독립적이므로 테스트하기 쉽다.
	- 각 미들웨어 함수는 독립적으로 테스트할 수 있으며, 특정 상태에 의존하지 않기 때문에 테스트가 간단해진다.


### 🔥`router`, `controllers` , `service`
*매번 헷깔리는 역할*
#### **router**
- 클라이언트 요청을 특정 컨트롤러 함수에 연결하는 역할을 합니다.
- 각 라우트는 특정 HTTP 메서드와 URL 패턴에 매핑되고, 요청이 해당 메서드와 URL패턴과 일치하면 연결된 컨트롤러 함수가 실행된다.


#### **controllers**
- <u>클라이언트 요청을 처리하고 응답을 반환하는 로직이 위치</u>한다.
- 주로 라우터에서 요청 핸들러로 사용되며, 비즈니스 로직의 실행과 에러 처리를 포함한다.
- 이 작업은 서비스 함수를 호출하고 그 결과를 클라이언트에게 반환하는 방식으로 이루어진다.

#### **service**
- 일반적으로 비즈니스 로직을 처리하는 코드가 위치한다.
- 주로 데이터베이스와의 상호작용을포함하며, <u>컨트롤러에서 요청을 처리하기 위해 필요한 동작을 정의한다.</u>
- service 를 구분하여 관리하면 비즈니스 로직을 잘 정리할 수 있다.


